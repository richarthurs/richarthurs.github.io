{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAf0lEQVQI12P49++f3v///xWBmBuIOYBYigEJQMXEobQ0kpg8EDMxoAOg4HQgzgbiBCB2AeJaIHYE4jAgjgbiFCD2BWI3IG6FymUCcQWUtoWqCwKpARkYBcReQJwF1egBZdcAXQ/ix0MtAmlMB4r5AGkHIA4BskGW5kMdZALESQDh3apPUyViLgAAAABJRU5ErkJggg==","width":400,"height":64,"src":"/static/1642a962a17c5982edb23d2f20e5a8e6/51380/logo.png","srcSet":"/static/1642a962a17c5982edb23d2f20e5a8e6/51380/logo.png 1x,\n/static/1642a962a17c5982edb23d2f20e5a8e6/240c8/logo.png 1.5x,\n/static/1642a962a17c5982edb23d2f20e5a8e6/f5cf3/logo.png 2x,\n/static/1642a962a17c5982edb23d2f20e5a8e6/01d7c/logo.png 3x"}}},"markdownRemark":{"html":"<p>For a class project, my team and I were lucky enough to be able to build a smart lock. The prototypes were constructed of 3D printed parts for the mechanicals, and all of the electronics and software were designed by me.</p>\n<h2>Video</h2>\n<p>I made a video of the project here, which goes into detail about a lot of the design decisions.</p>\n<h2>Electrical Hardware</h2>\n<p>MCU: ATmega 328</p>\n<p>WiFi: ESP8266 module</p>\n<p>Motor driver: L298</p>\n<p>A custom designed optical encoder to determine whether the door was locked or unlocked.</p>\n<p>The motor driver chip was chosen because of my familiarity with it, as well as the fact that I had multiple on hand. Throughout the entire electronics design process, components we already owned were picked to keep the project under budget.</p>\n<p>Control of the system was handled by the ‘328, which communicated with the WiFi module over serial, and took inputs from the pushbutton and optical encoder. Feedback was provided to the user through an LED, a beeper, and through the web interface itself. Power came from a wall adaptor, as none of the components for the prototype were optimized for low power operation. In the future, the firmware should put the WiFi module to sleep, which would result in considerable power savings. And given that the ESP8266 has an internal ARM microcontroller, we could do all of the control from the module, negating the need for the ATmega 328.</p>\n<h2>Software</h2>\n<p>The lock was controlled by a web interface. When buttons on the interface were pressed, the lock would open or close depending on its current state. The state of the lock was checked before every movement and always kept up to date in a  MySQL database that the interface had access to. The backend was written in PHP, and database entries were also updated when the physical button on the lock was pressed. States were saved with a timestamp so users could see when the lock was last actuated. Live user feedback was mostly implemented, using AJAX.</p>\n<h2>Mechanicals</h2>\n<p>All of the mechanical components for the lock were designed in SolidWorks and 3D printed. Two prototypes were created, and parts were carried over between prototypes to keep the project under budget. Here are the main components:</p>\n<p>Coupler between motor and lock lever\nOptical encoder wheel\nEncoder mount\nMain case with integrated PCB and motor mounts\nPushbutton extender (prototype #2 only)\nCase lid/front panel (prototype #2 only)\nI designed everything but the main case for prototype #2, though I did modify it with my own motor and PCB mounting bosses. The entirety of the lock was assembled in CAD to check fit before printing, and 3D printing constraints were considered throughout the entire process. By creating two prototypes, we were able to nail the tolerances for the final prototype, enabling us to create very reliable friction fits for some parts, reducing BOM cost.</p>\n<h2>Verdict</h2>\n<p>This was a very rewarding project to complete. I got the opportunity to utilize many sub-modules that I’d had experience with from previous projects (motor driver, power supply, etc), but also the chance to use new modules, like the ESP8266 WiFi board. Programming the web interface was an interesting challenge as I’d never communicated with a MySQL database through PHP before, or set up databases and handled GET requests.</p>\n<p>In the future, it’d be fun to revisit the project and take more time to design it for low power and make it physically smaller. There are many approaches to this - sleeping the WiFi module, getting rid of the external MCU, or communicating over Bluetooth to a WiFi base station. There was also a lot of empty space inside the prototype. While it looked impressive, the empty space was really just a waste. A case redesign, coupled with a custom PCB (instead of a protoboard one-off) would allow the device to be a lot smaller.</p>\n<p>The web interface could also do with a security overhaul. I’m no security expert, and it likely shows in the code for the backend, which is obviously not a particularly good thing for a lock connected to the internet. Luckily for the prototype, it can only be actuated by devices on its own local network, which provides a good amount of intrinsic security to the system.</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For a class project, my team and I were lucky enough to be able to build a smart lock. The prototypes were constructed of 3D printed parts for the mechanicals, and all of the electronics and software were designed by me."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Video"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I made a video of the project here, which goes into detail about a lot of the design decisions."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Electrical Hardware"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"MCU: ATmega 328"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"WiFi: ESP8266 module"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Motor driver: L298"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A custom designed optical encoder to determine whether the door was locked or unlocked."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The motor driver chip was chosen because of my familiarity with it, as well as the fact that I had multiple on hand. Throughout the entire electronics design process, components we already owned were picked to keep the project under budget."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Control of the system was handled by the ‘328, which communicated with the WiFi module over serial, and took inputs from the pushbutton and optical encoder. Feedback was provided to the user through an LED, a beeper, and through the web interface itself. Power came from a wall adaptor, as none of the components for the prototype were optimized for low power operation. In the future, the firmware should put the WiFi module to sleep, which would result in considerable power savings. And given that the ESP8266 has an internal ARM microcontroller, we could do all of the control from the module, negating the need for the ATmega 328."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Software"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The lock was controlled by a web interface. When buttons on the interface were pressed, the lock would open or close depending on its current state. The state of the lock was checked before every movement and always kept up to date in a  MySQL database that the interface had access to. The backend was written in PHP, and database entries were also updated when the physical button on the lock was pressed. States were saved with a timestamp so users could see when the lock was last actuated. Live user feedback was mostly implemented, using AJAX."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Mechanicals"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"All of the mechanical components for the lock were designed in SolidWorks and 3D printed. Two prototypes were created, and parts were carried over between prototypes to keep the project under budget. Here are the main components:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Coupler between motor and lock lever\nOptical encoder wheel\nEncoder mount\nMain case with integrated PCB and motor mounts\nPushbutton extender (prototype #2 only)\nCase lid/front panel (prototype #2 only)\nI designed everything but the main case for prototype #2, though I did modify it with my own motor and PCB mounting bosses. The entirety of the lock was assembled in CAD to check fit before printing, and 3D printing constraints were considered throughout the entire process. By creating two prototypes, we were able to nail the tolerances for the final prototype, enabling us to create very reliable friction fits for some parts, reducing BOM cost."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Verdict"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This was a very rewarding project to complete. I got the opportunity to utilize many sub-modules that I’d had experience with from previous projects (motor driver, power supply, etc), but also the chance to use new modules, like the ESP8266 WiFi board. Programming the web interface was an interesting challenge as I’d never communicated with a MySQL database through PHP before, or set up databases and handled GET requests."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In the future, it’d be fun to revisit the project and take more time to design it for low power and make it physically smaller. There are many approaches to this - sleeping the WiFi module, getting rid of the external MCU, or communicating over Bluetooth to a WiFi base station. There was also a lot of empty space inside the prototype. While it looked impressive, the empty space was really just a waste. A case redesign, coupled with a custom PCB (instead of a protoboard one-off) would allow the device to be a lot smaller."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The web interface could also do with a security overhaul. I’m no security expert, and it likely shows in the code for the backend, which is obviously not a particularly good thing for a lock connected to the internet. Luckily for the prototype, it can only be actuated by devices on its own local network, which provides a good amount of intrinsic security to the system."}]}],"data":{"quirksMode":false}},"excerpt":"For a class project, my team and I were lucky enough to be able to build a smart lock. The prototypes were constructed of 3D printed parts…","timeToRead":3,"frontmatter":{"title":"WiFI Smart Lock","userDate":"16 September 2015","date":"2015-09-16T00:00:00.000Z","tags":["Smart Lock","3d-printing","wifi","esp8266","embedded","Blog-post"],"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAeABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIDBAUB/8QAFQEBAQAAAAAAAAAAAAAAAAAAAwT/2gAMAwEAAhADEAAAAb6PVmfUGGLLhkUW1jg4f//EABwQAAICAgMAAAAAAAAAAAAAAAECADIREgMTMf/aAAgBAQABBQKdi5Ws5vVrviOwYpSaKSK//8QAFxEAAwEAAAAAAAAAAAAAAAAAAQIQEf/aAAgBAwEBPwFjhjLs/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAECERD/2gAIAQIBAT8BmdQiaxc//8QAHBAAAgICAwAAAAAAAAAAAAAAAAECEBFxMUFh/9oACAEBAAY/AqVQ2I4I+MVZ7Fo//8QAHhAAAgICAgMAAAAAAAAAAAAAAAERITFREKFBcZH/2gAIAQEAAT8hwQIm2vaOsTXA9YdOQv042eR8+iRqY0sf4j//2gAMAwEAAgADAAAAEMsuQ//EABcRAQEBAQAAAAAAAAAAAAAAAAEAITH/2gAIAQMBAT8QUCXZEJPb/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAx/9oACAECAQE/ECZbBAxGX//EAB4QAQADAAICAwAAAAAAAAAAAAEAESExQRBRcdHw/9oACAEBAAE/EABa4S0ZWi8uGajSIM+Pp4rsF+aaqZMbZlVmB38xr+SYdvcthE0Mo/Zk/9k=","aspectRatio":0.6666666666666666,"src":"/static/71a75a9cfa56bcdb5a9ddc0eda3fe386/a6f99/smartlock-1.jpg","srcSet":"/static/71a75a9cfa56bcdb5a9ddc0eda3fe386/48ab2/smartlock-1.jpg 930w,\n/static/71a75a9cfa56bcdb5a9ddc0eda3fe386/a6f99/smartlock-1.jpg 1296w","sizes":"(max-width: 1296px) 100vw, 1296px"}}},"author":{"id":"Richard","bio":"Mechatronics Systems engineering student passionate about space, interested in high-reliability embedded systems and computer vision. Currently turning coffee into CubeSats and drones.","avatar":{"children":[{"__typename":"ImageSharp","fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAB589OeKWwkKgbQn//xAAbEAACAwADAAAAAAAAAAAAAAABAgASIREiMf/aAAgBAQABBQKE9YzUFt5h1V0n3//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASE//8QAFREBAQAAAAAAAAAAAAAAAAAAESD/2gAIAQIBAT8BY//EABoQAAICAwAAAAAAAAAAAAAAAAABESEQIDH/2gAIAQEABj8CFHcUrJ1//8QAGhABAAMBAQEAAAAAAAAAAAAAAQARIUExEP/aAAgBAQABPyG1c2E0Ipg9xPQFJ35HtxipKNj1P//aAAwDAQACAAMAAAAQkxCD/8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBECH/2gAIAQMBAT8Q0xkK/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAEQEUH/2gAIAQIBAT8Qs4WiP//EABwQAQADAAMBAQAAAAAAAAAAAAEAESExQXFhkf/aAAgBAQABPxCgAp6NYEcIGjV7i+0/kFpV61wTiYFlNYhBTUGAHzHlQFSFqER9qn//2Q==","width":400,"height":400,"src":"/static/a2b7322425489e49016cd6942dbb87ef/2e811/richard.jpg","srcSet":"/static/a2b7322425489e49016cd6942dbb87ef/2e811/richard.jpg 1x"}}]}}}},"relatedPosts":{"totalCount":1,"edges":[{"node":{"id":"dc137c61-acb6-5489-b00a-81edbd2cc131","timeToRead":3,"excerpt":"For a class project, my team and I were lucky enough to be able to build a smart lock. The prototypes were constructed of 3D printed parts…","frontmatter":{"title":"WiFI Smart Lock"},"fields":{"slug":"/2015/09/16/smartlock/"}}}]}},"pageContext":{"slug":"/2015/09/16/smartlock/","prev":{"excerpt":"TI locks some GPIO pins because they’re required for programming interfaces like JTAG. SW2 on the LaunchPad is connected to PF0 ( page 33…","timeToRead":3,"frontmatter":{"title":"TI ARM LaunchPad GPIO Unlock Tutorial","tags":["microcontroller","TI","ARM","tutorial","Blog-post"],"date":"2015-05-25T00:00:00.000Z","image":{"childImageSharp":{"fluid":{"aspectRatio":1.5609756097560976,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAABzFmcqsOD/8QAGBABAQEBAQAAAAAAAAAAAAAAAQASAiH/2gAIAQEAAQUCQTNnqJvL/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BCf/EABgQAAMBAQAAAAAAAAAAAAAAAAARMSAh/9oACAEBAAY/Am+lxD//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhYTFR8P/aAAgBAQABPyFSidKh6qbCZAblK4jlH//aAAwDAQACAAMAAAAQSy//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxBZ/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EIBf/8QAHxAAAQIGAwAAAAAAAAAAAAAAAQARITFRgZGh0eHw/9oACAEBAAE/EAwgzNR0gkOPVwqGftOOGAAzOEQVU9I1wv/Z","sizes":"(max-width: 3264px) 100vw, 3264px","src":"/static/dbb6f3697ea5cc34753ab1d6f1c08a2d/b326b/tiva-launchpad-unlock.jpg","srcSet":"/static/dbb6f3697ea5cc34753ab1d6f1c08a2d/4018e/tiva-launchpad-unlock.jpg 930w,\n/static/dbb6f3697ea5cc34753ab1d6f1c08a2d/88222/tiva-launchpad-unlock.jpg 1860w,\n/static/dbb6f3697ea5cc34753ab1d6f1c08a2d/b326b/tiva-launchpad-unlock.jpg 3264w"}}},"author":{"id":"Richard","bio":"Mechatronics Systems engineering student passionate about space, interested in high-reliability embedded systems and computer vision. Currently turning coffee into CubeSats and drones.","avatar":{"children":[{"fixed":{"src":"/static/a2b7322425489e49016cd6942dbb87ef/2e811/richard.jpg"}}]}}},"fields":{"layout":"","slug":"/posts/ti-launchpad-gpio-unlock/"}},"next":{"excerpt":"I bought a Raspberry Pi nearly a year ago, always intending to use it in OpenCV experiments. Just recently, I got around to starting the…","timeToRead":4,"frontmatter":{"title":"Getting Started With OpenCV and Raspberry Pi","tags":["openCV","camera","raspberry pi","UART","linux","embedded","Blog-post"],"date":"2017-08-20T00:00:00.000Z","image":{"childImageSharp":{"fluid":{"aspectRatio":1.8041237113402062,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAGDKhliDf/EABkQAAMAAwAAAAAAAAAAAAAAAAABAhESMf/aAAgBAQABBQJSkPXAy+n/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwFn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGBAAAwEBAAAAAAAAAAAAAAAAARAhMQD/2gAIAQEABj8CvQPBi//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhUaH/2gAIAQEAAT8h2A8jWwMrChUA5Mf/2gAMAwEAAgADAAAAEGAP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREQ/9oACAEDAQE/EBG5/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QGf/EABoQAQEBAAMBAAAAAAAAAAAAAAERACExYVH/2gAIAQEAAT8QoUAes3LjvIuIEhPiYgMgwTm+Gd//2Q==","sizes":"(max-width: 700px) 100vw, 700px","src":"/static/d6ff0611eb89472cc463867050e13d5b/a7a5f/raspi-opencv-1-1.jpg","srcSet":"/static/d6ff0611eb89472cc463867050e13d5b/a7a5f/raspi-opencv-1-1.jpg 700w"}}},"author":{"id":"Richard","bio":"Mechatronics Systems engineering student passionate about space, interested in high-reliability embedded systems and computer vision. Currently turning coffee into CubeSats and drones.","avatar":{"children":[{"fixed":{"src":"/static/a2b7322425489e49016cd6942dbb87ef/2e811/richard.jpg"}}]}}},"fields":{"layout":"","slug":"/2017/08/20/getting-started-with-opencv-and-raspberry-pi/"}},"primaryTag":"Smart Lock"}}
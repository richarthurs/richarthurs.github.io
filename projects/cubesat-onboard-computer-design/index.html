<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.0.80"/><link rel="canonical" href="https://gatsby-casper.netlify.com/projects/cubesat-onboard-computer-design/" data-baseprotocol="https:" data-basehost="gatsby-casper.netlify.com"/><title data-react-helmet="true">CubeSat Onboard Computer Design</title><meta data-react-helmet="true" name="description" content="Over the past year and a half, I have been working on the SFU Satellite Design Team as the computing subsystem lead. The team and I have…"/><meta data-react-helmet="true" property="og:site_name" content="Richard Arthurs"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="CubeSat Onboard Computer Design"/><meta data-react-helmet="true" property="og:description" content="Over the past year and a half, I have been working on the SFU Satellite Design Team as the computing subsystem lead. The team and I have…"/><meta data-react-helmet="true" property="og:url" content="https://richarthurs.com/projects/cubesat-onboard-computer-design/"/><meta data-react-helmet="true" property="og:image" content="https://richarthurs.com/static/cbe05a39e083668f316e31cb380ff279/1dc70/obc1-post-header.jpg"/><meta data-react-helmet="true" property="article:published_time" content="2018-06-06"/><meta data-react-helmet="true" property="article:tag" content="Projects"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="CubeSat Onboard Computer Design"/><meta data-react-helmet="true" name="twitter:description" content="Over the past year and a half, I have been working on the SFU Satellite Design Team as the computing subsystem lead. The team and I have…"/><meta data-react-helmet="true" name="twitter:url" content="https://richarthurs.com/projects/cubesat-onboard-computer-design/"/><meta data-react-helmet="true" name="twitter:image" content="https://richarthurs.com/static/cbe05a39e083668f316e31cb380ff279/1dc70/obc1-post-header.jpg"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="Richard"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="Projects"/><meta data-react-helmet="true" name="twitter:site" content="@richricharda"/><meta data-react-helmet="true" name="twitter:creator" content="@richricharda"/><meta data-react-helmet="true" property="og:image:width" content="768"/><meta data-react-helmet="true" property="og:image:height" content="512"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><script>
  window.excludeGAPaths=[/^(?:\/preview\/(?:(?!(?:\/|^)\.).)*?)$/];
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-XXXX-Y',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(navigator.doNotTrack == "1" || window.doNotTrack == "1")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-XXXX-Y', 'auto', {"sampleRate":100,"siteSpeedSampleRate":10});
      ga('set', 'anonymizeIp', true);
      }
      </script><link as="script" rel="preload" href="/component---src-templates-post-tsx-6d3e5522178fe64dc0af.js"/><link as="script" rel="preload" href="/app-c8ec71019ac90dba6016.js"/><link as="script" rel="preload" href="/1-c3c52ed390c81fa74efc.js"/><link as="script" rel="preload" href="/0-aca3de4b4984e5ff39b4.js"/><link as="script" rel="preload" href="/4-4c675c404abc2e1701a3.js"/><link as="script" rel="preload" href="/2-0b7d4f1ff82e11b59260.js"/><link as="script" rel="preload" href="/webpack-runtime-b6b45285b140fa8164bf.js"/><link as="fetch" rel="preload" href="/static/d/418/path---projects-cubesat-onboard-computer-design-7-e-9-3a6-4y0zUFGG7KUcGRjkeQ97afsdWdE.json" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="post-template"><style data-emotion-css="zf0iqh">.css-zf0iqh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><div class="css-10wrb3n css-zf0iqh esvym2d0"><header class="css-1mpn83 css-1x0l29j"><div class="css-s2cjas"><nav class=" css-a1zygu"><style data-emotion-css="25mjrn">.css-25mjrn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;margin-right:10px;padding-bottom:80px;-webkit-letter-spacing:0.4px;-moz-letter-spacing:0.4px;-ms-letter-spacing:0.4px;letter-spacing:0.4px;white-space:nowrap;-ms-overflow-scrolling:touch;}@media (max-width:700px){.css-25mjrn{margin-right:0;padding-left:4vw;}}</style><div class="css-25mjrn e1sju8vj0"><a class="css-j4gise site-nav-logo" href="/"><img src="/static/cb5d790331d5545f6a5a6ee13a4b29f3/51380/logo-square.png" alt="Richard Arthurs"/></a><ul class="css-1trdsxq" role="menu"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/tags/projects/">Projects</a></li><li role="menuitem"><a href="/tags/blog-post/">Blog</a></li></ul></div><style data-emotion-css="cniab2">.css-cniab2{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:40px;}@media (max-width:700px){.css-cniab2{display:none;}}</style><div class="css-cniab2 e1sju8vj1"><style data-emotion-css="1im5alu">.css-1im5alu{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.css-1im5alu a:last-of-type{padding-right:20px;}</style><div class="css-1im5alu e1sju8vj2"><a class="css-1l1dftb" href="https://www.dropbox.com/s/ssybgqecwiqe9de/Richard%20Arthurs%20Resume.pdf?dl=0" target="_blank" title="Resume" rel="noopener noreferrer" download="true"><p>Resume</p></a></div></div></nav></div></header><main id="site-main" class="site-main css-1ptyxcl css-1x0l29j"><div class="css-s2cjas"><article class="css-vyvttm "><style data-emotion-css="29d3h2">.css-29d3h2{margin:0 auto;padding:6vw 3vw 3vw;max-width:1040px;text-align:center;}@media (max-width:500px){.css-29d3h2{padding:14vw 3vw 10vw;}}</style><header class="css-29d3h2 ewnyor50"><style data-emotion-css="njyqyw">.css-njyqyw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#738a94;font-size:1.4rem;font-weight:600;text-transform:uppercase;}@media (max-width:500px){.css-njyqyw{font-size:1.2rem;line-height:1.3em;}}</style><section class="css-njyqyw ewnyor51"><style data-emotion-css="et0m70">.css-et0m70{color:#3eb0ef;}</style><time dateTime="2018-06-06" class="css-et0m70 ewnyor52">6 June 2018</time><style data-emotion-css="m5hopj">.css-m5hopj{display:inline-block;margin:0 6px 1px;}</style><span class="css-m5hopj ewnyor55">/</span><a href="/tags/projects/">Projects</a></section><style data-emotion-css="ldwdh4">.css-ldwdh4{margin:0;color:#0b0c0e;}@media (max-width:500px){.css-ldwdh4{font-size:2.9rem;}}</style><h1 class="css-ldwdh4 ewnyor53">CubeSat Onboard Computer Design</h1></header><style data-emotion-css="1y0hjh3">.css-1y0hjh3{margin:0 -10vw -165px;height:800px;background:#c5d2d9 center center;background-size:cover;border-radius:5px;}@media (max-width:1170px){.css-1y0hjh3{margin:0 -4vw -100px;height:600px;border-radius:0;}}@media (max-width:800px){.css-1y0hjh3{height:400px;}}@media (max-width:500px){.css-1y0hjh3{margin-bottom:4vw;height:350px;}}</style><figure class="css-1y0hjh3 ewnyor54"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:66.66666666666667%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAgP/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAFDvN2UBcP/xAAaEAACAwEBAAAAAAAAAAAAAAABAgADEhEx/9oACAEBAAEFAlzB6yDuiIlpVje0/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAAAERICEx/9oACAEBAAY/AhqhiH//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhQTFR/9oACAEBAAE/IdPMguoov2cQnBAjQ7cQ7D//2gAMAwEAAgADAAAAELsP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qp//EABwQAQACAgMBAAAAAAAAAAAAAAEAESExQVFhcf/aAAgBAQABPxA0CPWqlSsQEs5gnbPyUMwN5IALR5bJcWPZZP/Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/cbe05a39e083668f316e31cb380ff279/1dc70/obc1-post-header.jpg 768w" sizes="(max-width: 768px) 100vw, 768px" /><img src="/static/cbe05a39e083668f316e31cb380ff279/1dc70/obc1-post-header.jpg" alt="" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><style data-emotion-css="1rebts">.css-1rebts{position:relative;margin:0 auto;padding:70px 100px 0;min-height:230px;font-family:Georgia,serif;font-size:2.2rem;line-height:1.6em;background:#fff;}@media (max-width:1170px){.css-1rebts{padding:5vw 7vw 0;}}@media (max-width:800px){.css-1rebts{font-size:1.9rem;}}.css-1rebts:before{content:'';position:absolute;top:15px;left:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(-5deg);-ms-transform:rotate(-5deg);transform:rotate(-5deg);}.css-1rebts:after{content:'';position:absolute;top:15px;right:-5px;z-index:-1;display:block;width:20px;height:200px;background:rgba(39,44,49,0.15);-webkit-filter:blur(5px);filter:blur(5px);-webkit-transform:rotate(5deg);-ms-transform:rotate(5deg);transform:rotate(5deg);}.css-1rebts h1,.css-1rebts h2,.css-1rebts h3,.css-1rebts h4,.css-1rebts h5,.css-1rebts h6,.css-1rebts p,.css-1rebts ul,.css-1rebts ol,.css-1rebts dl,.css-1rebts pre,.css-1rebts blockquote,.css-1rebts .post-full-comments,.css-1rebts .footnotes{min-width:100%;}.css-1rebts li{word-break:break-word;}.css-1rebts li p{margin:0;}.css-1rebts a{color:#000;word-break:break-word;box-shadow:#3eb0ef 0 -1px 0 inset;}.css-1rebts a:hover{color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;}.css-1rebts strong,.css-1rebts em{color:#0a0b0c;}.css-1rebts small{display:inline-block;line-height:1.6em;}.css-1rebts li:first-child{margin-top:0;}.css-1rebts img,.css-1rebts video{display:block;margin:1.5em auto;max-width:1040px;height:auto;}@media (max-width:1040px){.css-1rebts img,.css-1rebts video{width:100%;}}.css-1rebts img[src$='#full']{max-width:none;width:100vw;}.css-1rebts img + br + small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-1rebts iframe{margin:0 auto !important;}.css-1rebts blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:#3eb0ef 3px solid;}.css-1rebts blockquote p{margin:0 0 1em 0;color:inherit;font-size:inherit;line-height:inherit;font-style:italic;}.css-1rebts blockquote p:last-child{margin-bottom:0;}.css-1rebts code{padding:0 5px 2px;font-size:0.8em;line-height:1em;font-weight:400 !important;background:#e5eff5;border-radius:3px;}.css-1rebts p code{word-break:break-all;}.css-1rebts pre{overflow-x:auto;margin:1.5em 0 3em;padding:20px;max-width:100%;border:#131517 1px solid;color:#e5eff5;font-size:1.4rem;line-height:1.5em;background:#0e1012;border-radius:5px;}.css-1rebts pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent;}.css-1rebts pre code:not(span){color:inherit;}.css-1rebts .gatsby-resp-iframe-wrapper{margin:1.5em 0 3em;}.css-1rebts hr{margin:4vw 0;}.css-1rebts hr:after{content:'';position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#e4eaed;box-shadow:#fff 0 0 0 5px;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.css-1rebts h1,.css-1rebts h2,.css-1rebts h3,.css-1rebts h4,.css-1rebts h5,.css-1rebts h6{color:#0b0c0e;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;}.css-1rebts h1{margin:0.5em 0 0.2em 0;font-size:4.6rem;font-weight:700;}@media (max-width:500px){.css-1rebts h1{font-size:2.8rem;}}.css-1rebts h2{margin:0.5em 0 0.2em 0;font-size:3.6rem;font-weight:700;}@media (max-width:500px){.css-1rebts h2{font-size:2.6rem;}}.css-1rebts h3{margin:0.5em 0 0.2em 0;font-size:2.8rem;font-weight:700;}@media (max-width:500px){.css-1rebts h3{font-size:2.2rem;}}.css-1rebts h4{margin:0.5em 0 0.2em 0;font-size:2.8rem;font-weight:700;}@media (max-width:500px){.css-1rebts h4{font-size:2.2rem;}}.css-1rebts h5{display:block;margin:0.5em 0;padding:1em 0 1.5em;border:0;color:#3eb0ef;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center;}@media (min-width:1180px){.css-1rebts h5{max-width:1060px;}}@media (max-width:500px){.css-1rebts h5{padding:0 0 0.5em;font-size:2.2rem;}}.css-1rebts h6{margin:0.5em 0 0.2em 0;font-size:2.3rem;font-weight:700;}@media (max-width:500px){.css-1rebts h6{font-size:2rem;}}.css-1rebts table{display:inline-block;overflow-x:auto;margin:0.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;}.css-1rebts table{-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 0 center,radial-gradient(ellipse at right,rgba(0,0,0,0.2) 0%,rgba(0,0,0,0) 75%) 100% center;background-attachment:scroll,scroll;background-size:10px 100%,10px 100%;background-repeat:no-repeat;}.css-1rebts table td:first-child{background-image:linear-gradient( to right,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-size:20px 100%;background-repeat:no-repeat;}.css-1rebts table td:last-child{background-image:linear-gradient( to left,rgba(255,255,255,1) 50%,rgba(255,255,255,0) 100% );background-position:100% 0;background-size:20px 100%;background-repeat:no-repeat;}.css-1rebts table th{color:#15171A;font-size:1.2rem;font-weight:700;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;text-align:left;text-transform:uppercase;background-color:#f4f8fb;}.css-1rebts table th,.css-1rebts table td{padding:6px 12px;border:#e9ebec 1px solid;}@media (max-width:500px){.css-1rebts{padding:0;}.css-1rebts:before{display:none;}.css-1rebts:after{display:none;}}</style><section class="post-full-content css-1rebts e14ijd7g0"><div class="post-content"><p>Over the past year and a half, I have been working on the SFU Satellite Design Team as the computing subsystem lead. The team and I have been developing a low-cost, reliable, custom onboard computer (OBC) to meet the current and future mission requirements. This post features quite a few details about the project.</p>
<p>The original mission the OBC was designed for was calibration of the CHIME experiment, which was SFUSat’s first CubeSat mission developed during the Canadian Satellite Design Challenge.</p>
<h2>Features</h2>
<p>The SFUSat OBC is an inexpensive command and data handling system designed to be flexible across CubeSat missions. It features:</p>
<ul>
<li>Automotive and extended temperature range hardware wherever possible</li>
<li>Cortex R4 processor with lockstep architecture</li>
<li>Extensive self-tests, error handling, SECDED</li>
<li>RTC with minimum 7-day supercapacitor backup</li>
<li>Nonvolatile storage of mission data</li>
<li>Optional triple-redundant data storage</li>
<li>Flexible bus architecture with PC/104 form factor</li>
<li>2x SPI, I2C, ADC pins broken out to bus connector</li>
<li>Multiple interrupt-capable GPIO on bus connector</li>
<li>Simple-to-integrate 3.3 V power supply requirement</li>
<li>External USB power for development purposes</li>
<li>External watchdog timer</li>
<li>Current monitoring and auto reset for SEL protection</li>
<li>Onboard temperature sensor</li>
<li>FreeRTOS-based software stack ensuring priority and multi-tasking</li>
<li>Immediate and time-tagged commands</li>
<li>Automatic logging and timestamp of any data with friendly API</li>
<li>Minimum 7-day file history capacity</li>
<li>File downlink capability</li>
</ul>
<p>The TMS570 microcontroller used in the design has flight heritage with Robonaut, several satellites, and was confirmed to function correctly to 2.5 KRad by SFUSat. [1]</p>
<h2>File Handling &amp; Telemetry</h2>
<p>The satellite is intended to be frequently transmitting its most up-to-date telemetry packet, called standard telemetry. Telemetry points are also saved to a file onboard the satellite. One file is created per sensor, per day, and after 7 days have passed (or no room remains), the oldest set of log files are deleted. Log files can be downloaded at any time by a remote command. Standard telemetry sending can be suspended for a defined period of time for power saving purposes.</p>
<p>The filesystem chosen for the project is SPIFFS, an open-source and lightweight filesystem designed for SPI NOR flash devices. It proved simple to integrate and performed well in all of our tests.</p>
<p>The ring buffer style file architecture was simple and worked well overall. I developed an easy-to-use API to log data to files, where arbitrary text could be formatted and written into a file with a single function call using printf-style format specifiers. All writes to files were automatically timestamped. Developing easy-to-use APIs is a common theme of this project, and helps immensely when getting new members up to speed.</p>
<p>Files are named with a simple prefix-suffix methodology. The prefix ‘a’, ‘b’, and so on, represents the current “day” or time step. Over the course of a week, files with prefixes ‘a’ to ‘g’ will be created, and once ‘g’ files are finished, the ‘a’ will be deleted and replaced with new ‘a’-prefixed files. The suffix is another letter, ‘A’, corresponding to the file’s function, such as OBC temperature logs or general error logs. This naming methodology was chosen to make finding files quick, and to exploit the batch delete feature of SPIFFS.</p>
<p>We also have a “flag file” capability, which is used for storing and retrieving short, non-volatile flags from external flash memory. At startup, the system looks for the presence of this file, creates it if it doesn’t exist (and populates sensible defaults), or uses the existing flags.</p>
<h2>Self-Tests</h2>
<p>Upon startup, the OBC executes self tests to verify core functionality and connection to peripherals. Self-tested features include:</p>
<ul>
<li>CPU and all peripherals</li>
<li>Battery management system</li>
<li>External non-volatile memory</li>
</ul>
<p>Since the TMS570 self-tests wipe RAM, we save the results of self tests into a spare CAN data register that is not used by our application. The data in this register survives the self test, allowing us to determine which (if any) self tests have failed.</p>
<h2>OBC Epoch</h2>
<p>The OBC epoch is the real-time clock (RTC) based timestamp used throughout the system. Upon deployment, once the satellite has enough power to turn on the OBC, the real-time clock will start ticking from time 0. With a large super capacitor backup on the RTC, it is able to keep time for weeks without main system power. This capability can be used to determine how long the satellite had lost power, and it is used to timestamp files and coordinate antenna deployments.</p>
<p>The RTC chip is the Abracon AB-RTCMC-EA09-S3-D-B-T. It was chosen for low power, wide temperature range, and temperature compensated crystal features. It also has an alarm feature connected to a GPIO, which can be used to wake up the OBC from extended deep sleep periods. The time is represented in a human-readable date format which is converted to an absolute zero-based seconds format, with time 0 being the time the satellite first powered on.</p>
<h2>Command System</h2>
<p>The OBC software features a command system designed to be flexible. Commands have a main command, optional subcommand, and optional arguments (represented as hex data). The command system is linked to the UART for tethered development, and it’s linked to the radio so commands can be sent wirelessly.</p>
<p>Some of the commands include:</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- state get, set, and previous state
- log file dump by prefix and file name
- schedule a command to run in the future
- get OBC epoch, minimum heap
- get RTOS task snapshot (running tasks, task priorities)
- suspend and enable RTOS tasks
- execute CHIME calibration sequence
- external reset
- file system erase</code></pre></div>
<h2>FreeRTOS</h2>
<p>FreeRTOS is used as the real-time operating system solution. Now on version 10, version 9 is used on the OBC. It was chosen for its ease of use, excellent documentation, and vendor support with the TMS570. We rely heavily on the following RTOS features:</p>
<ul>
<li>task priorities</li>
<li>task suspension and deletion</li>
<li>mutexes and queues
We have found that many features that might be otherwise difficult to implement, have become straightforward by placing the functionality into a task that can be suspended. Good examples are external reset capability, and automatic SAFE mode entry if no signals are received over a long period of time. Task stack usage values are determined through experimentation, aided immensely by the command system’s task snapshot command, which can show tasks that are not running because of insufficient stack.</li>
</ul>
<h2>Radiation Effects Mitigation</h2>
<p>The OBC has been tested to 3.0 KRad at the TRIUMF facility. Tests were successful with zero occurrences of permanent data corruption, zero software lockups, and zero detected hardware latchups.</p>
<p>Single event upset effects are mitigated in the following ways:</p>
<ul>
<li>TMS570 internal SECDED ECC</li>
<li>External watchdog triggered reset and self-test upon software lockup</li>
<li>Reset initiates TMS570 self tests which validate ECC and exercise on-chip peripherals</li>
<li>Important configuration data and logs stored in flash memory</li>
<li>Single event latchup events are detected by an OBC-wide current monitor. In the event of an overcurrent event, a full power reset is triggered.</li>
<li>Fast reset prevents damage from overcurrent condition</li>
</ul>
<p>Startup procedures are run, including on-chip self-tests which can clear invalid bits
Resets are logged and can be analyzed on the ground.</p>
<h2>Watchdog</h2>
<p>An external watchdog is used to mitigate the effects of a software lockup. With an approximately 0.5 second timeout period, the watchdog will execute a power-on reset of the MCU if not ‘pet’ within the timeout period. The watchdog ‘pet’ feature is implemented in an RTOS task. By suspending the watchdog task from the command system, external hard reset capability is provided.</p>
<h2>Technical Specifications</h2>
<p>Nominal Power Draw:                        313 mW
Maximum Power Draw:                     380 mW
Voltage Supply:                                   3.3 V
Tested Radiation Tolerance:              3.0 KRAD
Mechanical Form Factor:                   PC/104
Nonvolatile Memory:                          8 MB
RTC Backup Time:                               1 week
Clock Speed:                                        60 MHz</p>
<h2>Ground Segment</h2>
<p>SFUSat has developed a custom ground segment application called Houston. Huston provides the following functionality:</p>
<ul>
<li>Live monitoring of all debug messages transmitted by the satellite</li>
<li>Compatibility with RF or wired connections</li>
<li>Command sequence creator</li>
<li>Load and save of command sequences</li>
<li>Uplink of command sequences</li>
<li>Validation of uplinked commands</li>
<li>Parsing of downloaded files and save to .csv</li>
</ul>
<h2>Project Management</h2>
<p>The project was managed with google docs as the document storage solution, and GitHub issues as the primary task tracking tool. I also experimented with Trello and Asana. A spreadsheet-based task tracker was adopted in the last phase of the project when the development team ballooned to 8 people under my management.</p>
<p>We preferred to use the GitHub wiki for software documentation.</p>
<h2>Versioning</h2>
<p>The hardware versions are outlined below:</p>
<p><strong>0.1</strong> – experiments on LaunchPad</p>
<p><strong>0.2</strong> – “DemoBoard” PCB built to prototype individual circuit designs for core features: latchup protection, flash memory, RTC, etc.</p>
<p><strong>0.3</strong> – First full revision, fully functional once reset circuit was bodged. 2-layer white PCB.</p>
<p><strong>0.4</strong> – Second revision, minor bug fixes from 0.3 version. 2-layer black PCB.</p>
<p><strong>0.5</strong> – Version used at CSDC final testing, black + ENIG 4-layer PCB. Minor bug fixes from 0.4, remove before flight programming jumper, full PC/104 connector layout.
The software operated on a continuous release schedule.</p>
<h2>References</h2>
<p><a href="http://www.academia.edu/11992711/On-board_data_handling_for_ambitious_nanosatellite_missions_using_automotive-grade_lockstep_microcontrollers">1- On-board data handling for ambitious nanosatellite missions</a></p></div></section><style data-emotion-css="1a0mcpy">.css-1a0mcpy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 auto;padding:3vw 0 6vw 0;max-width:840px;}</style><footer class="css-1a0mcpy e7emgmi0"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><section class="css-k008qs e157wiz10"><img class="css-2785xc" src="/static/a2b7322425489e49016cd6942dbb87ef/2e811/richard.jpg" alt="Richard"/><style data-emotion-css="fz4w57">.css-fz4w57 p{margin:0;color:#738a94;line-height:1.3em;}</style><section class="css-fz4w57 e157wiz12"><style data-emotion-css="1eii8n9">.css-1eii8n9{margin:8px 0 2px 0;padding:0;font-size:2rem;}.css-1eii8n9 a{color:#15171A;font-weight:700;}.css-1eii8n9 a:hover{-webkit-text-decoration:none;text-decoration:none;}</style><h4 class="css-1eii8n9 e157wiz11"><a href="/author/richard/">Richard</a></h4><p>Mechatronics Systems engineering student passionate about space, interested in high-reliability embedded systems and computer vision. Currently turning coffee into CubeSats and drones.</p></section></section><style data-emotion-css="1zye22">.css-1zye22{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-left:20px;}</style><div class="css-1zye22 e1k5zwkz0"><a class="css-1hp0auc" href="/author/richard/">Read More</a></div></footer></article></div></main><aside class="read-next css-1x0l29j"><div class="css-s2cjas"><style data-emotion-css="12kejdt">.css-12kejdt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -20px;padding:40px 0 0 0;}</style><div class="css-12kejdt ewnyor56"><style data-emotion-css="1wdz3mb">.css-1wdz3mb{position:relative;-webkit-flex:1 1 300px;-ms-flex:1 1 300px;flex:1 1 300px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 20px 40px;padding:25px;color:#fff;background:#15171A center center;background-size:cover;border-radius:5px;box-shadow:rgba(39,44,49,0.06) 8px 14px 38px,rgba(39,44,49,0.03) 1px 3px 8px;background-image:url("/static/f71fcf850ad1354270d6e5371d6bbd7e/f4589/blog-cover.jpg");}.css-1wdz3mb:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;display:block;background:linear-gradient(135deg,rgba(0,40,60,0.8) 0%,rgba(0,20,40,0.7) 100%);border-radius:5px;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);}</style><article class="css-1wdz3mb em2u7rs0"><style data-emotion-css="1d05jhl">.css-1d05jhl{position:relative;z-index:50;padding-top:20px;text-align:center;}</style><header class="css-1d05jhl em2u7rs1"><style data-emotion-css="qbcumt">.css-qbcumt{display:block;font-size:1.3rem;line-height:1.3em;opacity:0.8;}</style><small class="css-qbcumt em2u7rs2">— <!-- -->Richard Arthurs<!-- --> —</small><style data-emotion-css="y0gtj6">.css-y0gtj6{margin:0;padding:0 20px;color:#fff;font-size:3rem;line-height:1.2em;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;}.css-y0gtj6 a{color:#fff;font-weight:300;-webkit-text-decoration:none;text-decoration:none;}.css-y0gtj6 a:hover{-webkit-text-decoration:none;text-decoration:none;}</style><h3 class="css-y0gtj6 em2u7rs3"><a href="/tags/projects/">Projects</a></h3></header><style data-emotion-css="1x76w68">.css-1x76w68{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:80px;}.css-1x76w68 svg{width:40px;fill:transparent;stroke:#fff;stroke-width:0.5px;stroke-opacity:0.65;}</style><div class="css-1x76w68 em2u7rs4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path></svg></div><style data-emotion-css="1mqgav7">.css-1mqgav7{position:relative;z-index:50;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:1.7rem;}.css-1mqgav7 ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 auto;padding:0;text-align:center;list-style:none;}.css-1mqgav7 li{margin:0;padding:0;font-size:1.6rem;line-height:1.25em;font-weight:200;-webkit-letter-spacing:-0.5px;-moz-letter-spacing:-0.5px;-ms-letter-spacing:-0.5px;letter-spacing:-0.5px;}.css-1mqgav7 li a{display:block;padding:20px 0;border-bottom:rgba(255,255,255,0.3) 1px solid;color:#fff;font-weight:500;vertical-align:top;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;}.css-1mqgav7 li:first-of-type a{padding-top:10px;}.css-1mqgav7 li a:hover{opacity:1;}</style><div class="css-1mqgav7 em2u7rs5"><ul><li><a aria-current="page" class="" href="/projects/cubesat-onboard-computer-design/">CubeSat Onboard Computer Design</a></li><li><a href="/projects/demosat/">DemoSat For Educational Outreach</a></li><li><a href="/projects/drone-guidance-system/">Drone Guidance System</a></li></ul></div><style data-emotion-css="t8u9qr">.css-t8u9qr{position:relative;margin:15px 0 3px 0;text-align:center;}.css-t8u9qr a{color:#fff;}</style><footer class="css-t8u9qr em2u7rs6"><a href="/tags/projects/">See all 3 posts<!-- --> →</a></footer></article><article class="post-card css-1eugmea "><a class="css-kufnxr post-card-image-link" href="/2017/02/01/running-halcogen-on-mac-or-linux-with-wine/"><style data-emotion-css="8kte6t">.css-8kte6t{width:auto;height:200px;background:#c5d2d9 no-repeat center center;background-size:cover;}</style><div class="post-card-image css-8kte6t e1qfhan10"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div style="width:100%;padding-bottom:56.285714285714285%"></div><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAADF0lEQVQozyWRe0yTVxiHP5VLhxi5FINgQYYJUfEWWqFUIVQ/QletEnQmOMXMRZzBpYmJOiaJmQbnolGDF0wEiVccTkHsABvs3LRaFOfwn/nHthgVcdoL7VcUtDw71JOcnPPm/Z3nvL/3lWblLGaOtoAFuUZy9EXoDEtYaFgqzqVoxT3HYMRUWc2iso3kGC3oS1ajk1eysNAk8rLIy+QaStAbTOQVmJCk6ASk6ESkSDXVtUdoutpN/cUu6pvtnBDnsQud1F+7T32ri+PtLk5Yd9Jo/Y5Tth5OtvxKc0cP1prDjItWI32ShKRK0BAVl0KMOh3brT/wDEP/4CjPfSFeDMJAEF75xQZe2B/Q+VkpfaXlPOm6i1tox1ZL+w2kWDURCalIEXEaEaSiSkyn6+bvjI6GGAoG6B/4j9duD8HgEP6R94T+/oemYhMXZDO9ljXYVq+gq6Ya3rj52fYL0kQ1keo0AYxPIyJ+OqqkDGzdTt6NhFAExO0L4PW4GQwovFWGcWyq4ryorurzVRxavx7H12tp0Ovh/kPabzmJmTqbiSkzkcbFpgh6MlGTp3Hd0YNPPHZ7PPj8Ch7vIMGhd1zet4/TuQU8lstoqdjI0ZJldC8y8vzK1bDltg4HqjQtUclZYigCNtbM8ZNScLp6wwJFQIJvPzboyukzbJqVTaPRjE1eTp92cRh2T3wSHA6FNZfbhOVJGsarZyBNUGeKQNieksVt10NCoQ8ofj8jQuj57TaNunwa8oqQS8x8U1DInfhkXJYyPgQCBEY+AlvtTuLy16JZViWA03QkTs8kYcYCfmrr4NGffbx0i/69F9N2PqLJXMoubS7fF5s5mF/Itzodj+/0hvOvvcEw0PFXP9oDDub/YBeW4zM4f6aO8g0bOHSkDnunjQExYZ9PQRkV0H+fcWPzVvZnz2N31kzazp5jrC63V+HpgJchAW7q7EVVvJ0YeQdS5hwNDXWbqahYgmVdJdv2HEa2HsRcewnLj61YDlyjdG8zVnMF5cYy8r/az/xV25m3chufFlWSXrSFpLwviZy7jqjsL/gfcx0zfuTBVcwAAAAASUVORK5CYII=" alt="Running HALCoGen on Mac or Linux With WINE cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/5259da4feb956ce617e28ea77dbfdb62/15d58/halcogen-1.png 700w" sizes="(max-width: 700px) 100vw, 700px" /><img src="/static/5259da4feb956ce617e28ea77dbfdb62/15d58/halcogen-1.png" alt="Running HALCoGen on Mac or Linux With WINE cover image" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><style data-emotion-css="123mfn9">.css-123mfn9{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="post-card-content css-123mfn9 e1qfhan11"><a class="css-t0tfly post-card-content-link" href="/2017/02/01/running-halcogen-on-mac-or-linux-with-wine/"><header class="post-card-header"><style data-emotion-css="z4f0wj">.css-z4f0wj{display:block;margin-bottom:4px;color:#738a94;font-size:1.2rem;line-height:1.15em;font-weight:500;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;text-transform:uppercase;}</style><span class="css-z4f0wj e1qfhan12">HALCoGEN</span><style data-emotion-css="8kn4zf">.css-8kn4zf{margin-top:0;}</style><h2 class="css-8kn4zf e1qfhan13">Running HALCoGen on Mac or Linux With WINE</h2></header><style data-emotion-css="1pcdrot">.css-1pcdrot{font-family:Georgia,serif;}</style><section class="css-1pcdrot e1qfhan14"><p>This tutorial covers installing and running HALCoGen for TI Hercules/TMS570 MCUs on a mac or Linux machine using WINE. I first started using…</p></section></a><style data-emotion-css="1uyhyqd">.css-1uyhyqd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;padding:0 25px 25px;}</style><footer class="post-card-meta css-1uyhyqd e1qfhan15"><style data-emotion-css="rv6jj5">.css-rv6jj5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap-reverse;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;margin:0;padding:0;list-style:none;}</style><ul class="css-rv6jj5 e1qfhan16"><style data-emotion-css="15nd5aq">.css-15nd5aq{position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin:0;padding:0;}.css-15nd5aq:nth-child(1){z-index:10;}.css-15nd5aq:nth-child(2){z-index:9;}.css-15nd5aq:nth-child(3){z-index:8;}.css-15nd5aq:nth-child(4){z-index:7;}.css-15nd5aq:nth-child(5){z-index:6;}.css-15nd5aq:nth-child(6){z-index:5;}.css-15nd5aq:nth-child(7){z-index:4;}.css-15nd5aq:nth-child(8){z-index:3;}.css-15nd5aq:nth-child(9){z-index:2;}.css-15nd5aq:nth-child(10){z-index:1;}.css-15nd5aq:hover .author-name-tooltip{opacity:1;-webkit-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}</style><li class="css-15nd5aq e1qfhan17"><style data-emotion-css="194msbx">.css-194msbx{position:absolute;bottom:105%;z-index:999;display:block;padding:2px 8px;color:white;font-size:1.2rem;-webkit-letter-spacing:0.2px;-moz-letter-spacing:0.2px;-ms-letter-spacing:0.2px;letter-spacing:0.2px;white-space:nowrap;background:#15171A;border-radius:3px;box-shadow:rgba(39,44,49,0.08) 0 12px 26px,rgba(39,44,49,0.03) 1px 3px 8px;opacity:0;-webkit-transition:all 0.3s cubic-bezier(0.4,0.01,0.165,0.99);transition:all 0.3s cubic-bezier(0.4,0.01,0.165,0.99);-webkit-transform:translateY(6px);-ms-transform:translateY(6px);transform:translateY(6px);pointer-events:none;}@media (max-width:650px){.css-194msbx{display:none;}}</style><div class="author-name-tooltip css-194msbx e1qfhan18">Richard</div><a class="css-wd3r0v" href="/author/richard/"><img class=".e1qfhan19" src="/static/a2b7322425489e49016cd6942dbb87ef/2e811/richard.jpg" alt="Richard"/></a></li></ul><style data-emotion-css="zb10i8">.css-zb10i8{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin-left:20px;color:#738a94;font-size:1.2rem;line-height:33px;font-weight:500;-webkit-letter-spacing:0.5px;-moz-letter-spacing:0.5px;-ms-letter-spacing:0.5px;letter-spacing:0.5px;text-transform:uppercase;}</style><span class="css-zb10i8 e1qfhan110">3<!-- --> min read</span></footer></div></article></div></div></aside><footer class="css-1x0l29j css-1amu95n"><div class="css-s2cjas css-1ugh7vk"><section class="copyright"><a href="/">Richard Arthurs</a> © <!-- -->2019</section><style data-emotion-css="j0kq43">.css-j0kq43{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-j0kq43 a{position:relative;margin-left:20px;}.css-j0kq43 a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-j0kq43 a:first-of-type:before{display:none;}@media (max-width:650px){.css-j0kq43 a:first-child{margin-left:0;}}</style><nav class="css-j0kq43 e1me3zb40"><a href="/">Latest Posts</a></nav></div></footer></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-tsx","jsonName":"projects-cubesat-onboard-computer-design-7e9","path":"/projects/cubesat-onboard-computer-design/"};window.dataPath="418/path---projects-cubesat-onboard-computer-design-7-e-9-3a6-4y0zUFGG7KUcGRjkeQ97afsdWdE";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-c8ec71019ac90dba6016.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-6d3e5522178fe64dc0af.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-2435556000a11d5cd7aa.js"],"component---src-templates-author-tsx":["/component---src-templates-author-tsx-af751ccf2d90fe62f0de.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-c09dfde3022c202f3c20.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-6cb390368da3170d344a.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-3e43b141e389840dff35.js"],"pages-manifest":["/pages-manifest-0168817332dfa77814a3.js"]};/*]]>*/</script><script src="/webpack-runtime-b6b45285b140fa8164bf.js" async=""></script><script src="/2-0b7d4f1ff82e11b59260.js" async=""></script><script src="/4-4c675c404abc2e1701a3.js" async=""></script><script src="/0-aca3de4b4984e5ff39b4.js" async=""></script><script src="/1-c3c52ed390c81fa74efc.js" async=""></script><script src="/app-c8ec71019ac90dba6016.js" async=""></script><script src="/component---src-templates-post-tsx-6d3e5522178fe64dc0af.js" async=""></script></body></html>